# Apptainer definition file for emacs-claude-code testing
Bootstrap: docker
From: silex/emacs:28.2-ci

%post
    # Install additional dependencies if needed
    apt-get update && apt-get install -y \
        git \
        make \
        && apt-get clean \
        && rm -rf /var/lib/apt/lists/*

%environment
    export LC_ALL=C.UTF-8
    export LANG=C.UTF-8

%runscript
    cd /workspace
    bash run_tests.sh

%test
    emacs --version

%labels
    Author emacs-claude-code
    Version 1.0
    Description Container for testing emacs-claude-code with Emacs 28.2

%help
    This container runs the emacs-claude-code test suite.
    
    Usage:
        apptainer run --bind $(pwd):/workspace emacs-test.sif
    
    To run interactively:
        apptainer shell --bind $(pwd):/workspace emacs-test.sif